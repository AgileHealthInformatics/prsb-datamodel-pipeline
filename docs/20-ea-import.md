# EA Import

## Purpose

The EA import stage loads the **XML output** from the JSON-to-XML conversion into a Sparx Enterprise Architect (EA) repository. This step creates a structured, navigable class model of the PRSB standard within EA for further enrichment and transformation.

---

## Overview of Import Process

1. **Prepare XML**

   * Ensure the XML was generated by the pipeline's converter and validated against the schema in `schemas/prsb-xml/`.

2. **Select Import Script**

   * Use the appropriate JScript from `ea-scripts/import/`.
   * Scripts are tailored for specific PRSB standards or generic imports.

3. **Run Import in EA**

   * Open EA.
   * Select the target package in the Project Browser.
   * Run the import script from the `Scripts` window or EA toolbar.

4. **Review Imported Model**

   * Confirm class hierarchy matches PRSB JSON specification.
   * Check stereotypes, tagged values, and relationships.

---

## Script Location and Structure

Import scripts are stored in:

```
ea-scripts/import/
```

Each script contains:

* **Header metadata**: Purpose, usage, dependencies, update history.
* **Configuration section**: Paths, stereotypes, and schema references.
* **Main logic**: Reads XML, creates EA elements, sets properties, and applies stereotypes.
* **Post-processing**: Diagram layout, connector visibility, and basic QA checks.

---

## EA Model Structure After Import

The imported PRSB standard in EA will typically appear as:

```
<Standard Name> (Package)
│
├─ <Model> (Class, stereotype: "group")
│  ├─ <Model> (nested groups)
│  └─ <Element> (Class, stereotype: "item")
│
└─ Tagged Values and Notes applied to classes and attributes
```

---

## Common Tagged Values

* **Description**: Narrative text from PRSB spec.
* **DataType**: The value domain type (string, integer, code, etc.).
* **ValueSet**: Reference to coded value set.
* **Cardinality**: Min/Max occurrences.
* **Implementation Guidance**: Text guidance from the PRSB spec.

---

## Best Practices

* **Use a clean package**: Always import into a dedicated EA package to avoid conflicts.
* **Backup repository**: Make a copy before bulk imports.
* **Validate post-import**: Ensure that all key PRSB concepts appear and metadata is complete.
* **Maintain stereotypes**: Consistency is important for downstream transformations.

---

## Integration with Pipeline

This stage connects the **JSON-to-XML** conversion with the **EA transformation scripts**. Once the PRSB standard is in EA, you can:

* Enrich it with SNOMED CT codes
* Link to other standards
* Generate export artefacts for various healthcare interoperability formats
